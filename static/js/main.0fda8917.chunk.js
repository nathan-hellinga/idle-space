(this["webpackJsonpidle-space"]=this["webpackJsonpidle-space"]||[]).push([[0],{28:function(e,t,n){e.exports={purchasable:"purchasable_purchasable__26Bmy",innerWrapper:"purchasable_innerWrapper__1BvjA",disabled:"purchasable_disabled__1T2uz",content:"purchasable_content__11xw4",content2:"purchasable_content2__1IbH-",owned:"purchasable_owned__1Rpee"}},29:function(e,t,n){e.exports={controlWrapper:"assignments_controlWrapper__1Vt46",titles:"assignments_titles__UzqUJ",controls:"assignments_controls__35xmT",up:"assignments_up__2DFGc",down:"assignments_down__28gf3",assignedCount:"assignments_assignedCount__3rnZN"}},32:function(e,t,n){e.exports={wrapper:"communications_wrapper__3qRre",message:"communications_message__3vtW6",priorityMessage:"communications_priorityMessage__1Nwzh"}},42:function(e,t,n){e.exports={backdrop:"modal_backdrop__19mz5",wrapper:"modal_wrapper__2UEXh",actions:"modal_actions__1e5yH"}},46:function(e,t,n){e.exports={sidePanel:"main_sidePanel__2bUyy"}},47:function(e,t,n){e.exports={launchText:"launchPanel_launchText__FT86o",subtext:"launchPanel_subtext__3dYVR"}},58:function(e,t,n){e.exports={planetDisplay:"planetDisplay_planetDisplay__2xmBv"}},60:function(e,t,n){e.exports={typistWrapper:"meetColony_typistWrapper__3SuDz"}},61:function(e,t,n){e.exports={wrapper:"colony_wrapper__4WcZW"}},64:function(e,t,n){e.exports={wrapper:"pageSwitcher_wrapper__3NFYx"}},74:function(e,t,n){},75:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(26),s=n.n(i),c=(n(74),n(75),n(6)),o=n(110),l=n(111),u=n(94),d=n(112),b=n(46),p=n.n(b),h=n(4),j=n(3),m=n(18),y={spaceNet:{title:"Space Net",subtitle:"Catches things that float into the nets",basePrice:25,costMultiFactor:1.07,baseIncome:1,message:"Nets? In Space? You wont catch any fish but you might catch some stray rocks or aliens or something. Anything we catch in the nets will be melted down and processed into raw materials to use with the fabricators."},drone:{title:"Drone",subtitle:"Orbits the target and automatically mines using lasers",basePrice:500,costMultiFactor:1.08,baseIncome:10,message:"Drones will be able to get in much closer the the surface of the object."},probe:{title:"Probe",subtitle:"Launch a probe to drill core samples from the surface",basePrice:5500,costMultiFactor:1.09,baseIncome:75,message:""},lander:{title:"Lander",subtitle:"Send a small lander to the surface to do mobile excavation",basePrice:85e3,costMultiFactor:1.1,baseIncome:250,message:"Small little land rovers similar to the ones the Inter-Planetary Union used to survey Mars before its colonization."},miningRig:{title:"Mining Rig",subtitle:"Establish a semi-permanent mining structure on the surface",basePrice:5e5,costMultiFactor:1.11,baseIncome:850,message:"We have established a proper mining facility on the surface. We can now really start to screw this place up."},droneFactory:{title:"Drone Factory",subtitle:"No it does not make more drones, it is run by drones",basePrice:25e5,costMultiFactor:1.12,baseIncome:2e3,message:"Surprise! The factory actually does make more drones, what a deal!"},launchFacility:{title:"Orbital Launch",subtitle:"A proper orbital launch facility will allow us to get resources off the surface of this rock",basePrice:1e7,costMultiFactor:1.14,baseIncome:2500,message:"!We can now get resources into orbit and return to Earth with our spoils. With only 1 launch facility we won't be able to get much into orbit though. Build more launch facilities and space elevators to increase how much of our resources we can take back with us."},spaceElevator:{title:"Space Elevator",subtitle:"A space elevator will help us get even more resources into orbit before we blast back to earth rich",basePrice:5e7,costMultiFactor:1.15,baseIncome:3500,message:"The more orbital launch facilities and space elevators we have when we launch for earth the more of the resources we have extracted we will be able to take with us."}},f=[{id:"sn1",title:"Improved Space Nets",subtitle:"Bigger nets = more space junk. This one is pretty self-explanatory",message:"Double the size of the nets, if you make these nets any bigger we might actually catch some space fish.",multiplier:3,fabType:"spaceNet",basePrice:1e4,dependencies:[]},{id:"sn2",title:"Improved Space Nets II",subtitle:"Have you have tried eating soup off a plate? Yeah well we made the nets more like bowls now",message:"Did that make sense? Bowls?... the nets are deeper now so we can catch bigger stuff, kind of like a baseball glove.",multiplier:4,fabType:"spaceNet",basePrice:3e4,dependencies:["sn1"]},{id:"sn3",title:"Improved Space Nets III",subtitle:"We added titanium threads to the net to catch more volatile space junk like meteorites or knives",message:"We doubled the efficiency of the nets again, I think that makes it 3^6 or !(2^3) times better. They are stronger now so we can catch pretty much anything.",multiplier:8,fabType:"spaceNet",basePrice:55e4,dependencies:["sn2"]},{id:"dr1",title:"Improved Drones I",subtitle:"Improved drone batteries and auto pilot software lets us more efficiently control more drones without crashing them into each other",message:"We didnt actually improve anything, we just put extra batteries on them its not astrophysics.",multiplier:3,fabType:"drone",basePrice:125e3,dependencies:[]},{id:"dr2",title:"Improved Drones II",subtitle:"Improved aerial reconnaissance lets the drones find more mineral rich deposits to improve their efficiency",message:"Would you believe it if I told you before this upgrade I was controlling every single one of these drones?",multiplier:5,fabType:"drone",basePrice:225e3,dependencies:["dr1"]},{id:"pr1",title:"Improved Probes I",subtitle:"More powerful onboard generators allow us to probe deeper",message:"Each probe is now equipped with a thermo-radio isotope generator capable of up to 500W. Dont ask where we got the radioactive material, also... check yourself regularly.",multiplier:2,fabType:"probe",basePrice:1375e3,dependencies:[]},{id:"pr2",title:"Improved Probes II",subtitle:"Liquid cooling vents let the probes drill harder and for longer",message:"The probes can now scan for sub-surface liquids, drill for said liquids, and re-circulate the liquid through its drilling mantle. Pretty clever.",multiplier:3,fabType:"probe",basePrice:6875e3,dependencies:["pr1"]},{id:"ld1",title:"Improved Landers I",subtitle:"Improve the lander with a bigger drilling bit and a tiny shovel. We also gave them emotions, but only sadness so they feel bad when they keep getting stuck in holes",message:"Each land rover now feels an overwhelming sadness when it gets stuck on rocks and in holes. My research seems to indicate this will make them try harder to not get stuck in holes but somehow I think we might just end up with depressed probes.",multiplier:2,fabType:"lander",basePrice:2125e4,dependencies:[]},{id:"ld2",title:"Improved Landers II",subtitle:"These guys are so cute, we gave them little backpacks too so they could... cary more stuff?",message:"Depressed little surface trucks... but with accessories!",multiplier:2,fabType:"lander",basePrice:10625e4,dependencies:["ld1"]},{id:"mr1",title:"Improved Mining Rigs I",subtitle:"Improve the mining capabilities of the rig with ancient alien technology",message:"The ancient alien technology is... diesel... Yes technically the aliens have been dead for a while. We did say ancient.",multiplier:1.5,fabType:"miningRig",basePrice:3e8,dependencies:[]},{id:"mr2",title:"Improved Mining Rigs II",subtitle:"Improve the mining capabilities of the rig with ancient alien technology",message:"",multiplier:2,fabType:"miningRig",basePrice:15e8,dependencies:["mr1"]},{id:"df1",title:"Improved Drone Factory I",subtitle:"We make more drones that make more drones that make more drones...",message:"",multiplier:1.5,fabType:"droneFactory",basePrice:1875e5,dependencies:[]},{id:"df2",title:"Improved Drone Factory II",subtitle:"We make more drones that make more drones that make more drones...",message:"",multiplier:1.5,fabType:"droneFactory",basePrice:9375e5,dependencies:["df1"]},{id:"lf1",title:"Improved Launch Facility I",subtitle:"A second launch pad will let us launch twice as many rockets",message:"",multiplier:2,fabType:"launchFacility",basePrice:22e8,dependencies:[]},{id:"lf2",title:"Improved Launch Facility II",subtitle:"A third launch pad will let us launch three times as many rockets",message:"",multiplier:1.5,fabType:"launchFacility",basePrice:76e8,dependencies:["lf1"]},{id:"se1",title:"Improved Space Elevator I",subtitle:"They said I could be anything so I became a space rope",message:"",multiplier:1.25,fabType:"spaceElevator",basePrice:2e10,dependencies:[]},{id:"se2",title:"Improved Space Elevator II",subtitle:"Rope thicker rope stronger = bigger loads",message:"",multiplier:1.25,fabType:"spaceElevator",basePrice:4e10,dependencies:["se1"]}],O={hydroponics:{title:"Hydroponics Lab",subtitle:"A hydroponics lab will allow us to start growing our own plant matter. Its not tasty but at least we wont starve.",basePrice:5e3,costMultiFactor:2,workers:3,inputs:[],outputs:[{name:"biomass",numerator:3,denominator:60}]},medic:{title:"Medical Center",subtitle:"Modern medicine will be a huge benefit for us",basePrice:3e4,costMultiFactor:2,workers:1,inputs:[{name:"tech",numerator:5,denominator:60},{name:"biomass",numerator:2,denominator:60}],outputs:[{name:"meds",numerator:1,denominator:60}]},engineer:{title:"Engineers Workshop",subtitle:"Our systems are in dire need of maintenance, proper engineering training and tools would let us better maintain our life support and other systems",basePrice:1e5,costMultiFactor:2,workers:1,inputs:[],outputs:[{name:"steel",numerator:1,denominator:60},{name:"tech",numerator:1,denominator:60}]},cook:{title:"Kitchen",subtitle:"Cooking facilities will let us turn the biomass into proper food. Eating biomass sucks.",basePrice:2e5,costMultiFactor:2,workers:2,inputs:[{name:"biomass",numerator:4,denominator:60}],outputs:[{name:"food",numerator:2,denominator:60}]}},g=function(e){return e.resources.current},v=function(e){return e.sources},x=function(e){for(var t={},n=0,a=Object.entries(e.sources);n<a.length;n++){var r=Object(c.a)(a[n],2),i=r[0],s=r[1],o=y[i];if(o){var l,u=1,d=Object(m.a)(e.upgrades);try{var b=function(){var e=l.value,t=f.find((function(t){return t.id===e}));(null===t||void 0===t?void 0:t.fabType)===i&&(u*=t.multiplier)};for(d.s();!(l=d.n()).done;)b()}catch(p){d.e(p)}finally{d.f()}t[i]=o.baseIncome*s*u}}return t},w=function(e){for(var t=0,n=0,a=Object.entries(e.sources);n<a.length;n++){var r=Object(c.a)(a[n],2),i=r[0],s=r[1],o=y[i];if(o){var l,u=1,d=Object(m.a)(e.upgrades);try{var b=function(){var e=l.value,t=f.find((function(t){return t.id===e}));(null===t||void 0===t?void 0:t.fabType)===i&&(u*=t.multiplier)};for(d.s();!(l=d.n()).done;)b()}catch(p){d.e(p)}finally{d.f()}t+=o.baseIncome*s*u}}return t},k=function(e){return e.upgrades},_=function(e){for(var t=Object(j.a)({},e.colony.resources),n=0,a=Object.entries(t);n<a.length;n++){var r=Object(c.a)(a[n],2),i=r[0],s=r[1];t[i]=Math.floor(s)}return t},I=function(e){var t={};e:for(var n=0,a=Object.entries(e.colony.assignments);n<a.length;n++){var r=Object(c.a)(a[n],2),i=r[0],s=r[1],o=O[i];if(o){var l,u=Object(j.a)({},t),d=Object(m.a)(o.inputs);try{for(d.s();!(l=d.n()).done;){var b,p,h=l.value,y=h.numerator/h.denominator*s;if((null!==(b=e.colony.resources[h.name])&&void 0!==b?b:0)<y)continue e;u[h.name]=(null!==(p=u[h.name])&&void 0!==p?p:0)-y}}catch(k){d.e(k)}finally{d.f()}t=u;var f,g=Object(m.a)(o.outputs);try{for(g.s();!(f=g.n()).done;){var v,x=f.value,w=x.numerator/x.denominator*s;t[x.name]=(null!==(v=u[x.name])&&void 0!==v?v:0)+w}}catch(k){g.e(k)}finally{g.f()}}}return t},T=function(e){return e.colony.assignments},E=function(e){return e.communications.slice(-20).reverse()};function S(e){return e.toFixed().replace(/(\d)(?=(\d{3})+$)/g,"$1,")}var P=n(1);function C(){var e=Object(h.d)(g),t=Object(h.d)(w);return Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{style:{textAlign:"right",marginBottom:0},children:S(e)}),Object(P.jsx)("h2",{style:{marginTop:"-10px",marginBottom:0,opacity:.5,float:"left"},children:"Resources"}),Object(P.jsxs)("h2",{style:{marginTop:"-10px",marginBottom:0,opacity:.5,float:"right"},children:[S(t),"/s"]}),Object(P.jsx)("div",{style:{clear:"both"}})]})}var N=n(58),M=n.n(N);function D(){return Object(P.jsxs)("div",{className:M.a.planetDisplay,children:[Object(P.jsx)("h3",{style:{opacity:.5,float:"left",width:"49%"},children:"Asteroid: AX62"}),Object(P.jsx)("h3",{style:{opacity:.5,textAlign:"right",float:"right",width:"49%"},children:"000001.01.15"}),Object(P.jsx)("h3",{style:{opacity:.5,clear:"both"},children:"Resource Density: Low"}),Object(P.jsx)("h3",{style:{opacity:.5,clear:"both"},children:"Life: None"})]})}var R=n(28),W=n.n(R),A=n(68);function F(e){var t=e.title,n=e.subtitle,a=e.altText,r=e.owned,i=e.price,s=e.onPurchase,c=e.disabled;return Object(P.jsx)("div",{className:W.a.purchasable,children:Object(P.jsx)(A.a,{style:{width:"100%"},disabled:c,onClick:s,children:Object(P.jsxs)("div",{className:[W.a.innerWrapper,c&&W.a.disabled].join(" "),children:[Object(P.jsxs)("div",{className:W.a.content,style:{width:r>=0?"60%":"100%"},children:[Object(P.jsx)("h1",{children:t}),Object(P.jsx)("h3",{style:{marginTop:"auto"},children:S(i)})]}),Object(P.jsxs)("div",{className:W.a.content2,style:{width:r>=0?"60%":"100%"},children:[Object(P.jsx)("p",{style:{marginBottom:"4px"},children:n}),Object(P.jsx)("p",{style:{opacity:.7,marginTop:"auto"},children:a})]}),r>=0&&Object(P.jsx)("div",{style:{width:"40%",marginLeft:"auto"},children:Object(P.jsx)("span",{className:W.a.owned,children:Math.min(999,r)})})]})})})}var L="RESET",U="INCREASE_RESOURCES",B="DECREASE_RESOURCES",G="ADD_INCOME_SOURCE",Y="BUY_UPGRADE",z="ADD_MESSAGE",q="RECEIVE_MESSAGE",H="CLEAR_MESSAGES",X="TOGGLE_PAUSE",V="PRESTIGE",J="CLOSE_STORY",K="ADD_BUILDING",Z="ADD_COLONIST",$="INCREASE_COLONY_RESOURCE",Q="DECREASE_COLONY_RESOURCE",ee="ASSIGN_COLONIST",te="UN_ASSIGN_COLONIST",ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return{type:z,payload:{message:e,delay:t}}},ae=function(e){return{type:Z,payload:{count:e}}},re=function(e){return{type:ee,payload:{type:e}}};function ie(e,t){return Math.floor(e.basePrice*Math.pow(e.costMultiFactor,t))}function se(){var e=Object(h.c)(),t=Object(h.d)(v),n=Object(h.d)(w),a=Object(h.d)(x),r=Object(h.d)(g),i=Object(h.d)((function(e){return e.game.prestige})),s=Object.entries(y).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(j.a)(Object(j.a)({},a),{},{key:n})}));return Object(P.jsx)(o.a,{container:!0,spacing:1,style:{marginTop:"10px"},children:s.map((function(c,l){return 0===l||t[s[l-1].key]>0?Object(P.jsx)(o.a,{item:!0,xs:12,children:Object(P.jsx)(F,{title:c.title,subtitle:c.subtitle,altText:"".concat(S(a[c.key]/t[c.key]||c.baseIncome),"/s - ").concat((a[c.key]/n*100||0).toFixed(1),"% of total"),owned:t[c.key],price:ie(c,t[c.key]),disabled:r<ie(c,t[c.key]),onPurchase:function(){e(function(e,t,n,a){return{type:G,payload:{type:e,count:t,price:n,prestige:a}}}(c.key,t[c.key],ie(c,t[c.key]),i))}})},"fabrication_option_".concat(c.key)):null}))})}function ce(){var e=Object(h.c)(),t=Object(h.d)(g),n=Object(h.d)(k),a=Object(h.d)(v),r=Object(h.d)((function(e){return e.game.prestige}));return Object(P.jsx)(o.a,{container:!0,spacing:1,style:{marginTop:"10px"},children:f.map((function(i){return function(e,t,n){if(t.some((function(t){return t===e})))return!1;var a,r=f.find((function(t){return t.id===e})),i=Object(m.a)(r.dependencies);try{var s=function(){var e=a.value;if(!t.some((function(t){return t===e})))return{v:!1}};for(i.s();!(a=i.n()).done;){var c=s();if("object"===typeof c)return c.v}}catch(o){i.e(o)}finally{i.f()}return!(n[r.fabType]<=0)}(i.id,n,a)?Object(P.jsx)(o.a,{item:!0,xs:12,children:Object(P.jsx)(F,{title:i.title,subtitle:i.subtitle,price:i.basePrice,disabled:t<i.basePrice,altText:(s=i.multiplier,s>=2?"".concat(s,"x multiplier"):(s-=1,"".concat((s*=100).toFixed(0),"% increase"))),onPurchase:function(){e(function(e,t,n){return{type:Y,payload:{id:e,price:t,prestige:n}}}(i.id,i.basePrice,r))}})},"research_option_".concat(i.id)):null;var s}))})}var oe=n(32),le=n.n(oe);function ue(e){return Object(h.d)(e,h.b)}var de=n(23),be=n.n(de);function pe(){var e=Object(h.c)(),t=ue(E),n=function(e){return e.startsWith("!")?e.substring(1):e},a=function(e){return e.startsWith("!")};return Object(P.jsx)("div",{className:le.a.wrapper,children:Object(P.jsx)(o.a,{container:!0,direction:"column",spacing:2,children:t.map((function(t){return Object(P.jsx)(o.a,{item:!0,xs:12,children:t.received?Object(P.jsx)("span",{className:[le.a.message,a(t.message)&&le.a.priorityMessage].join(" "),dangerouslySetInnerHTML:{__html:n(t.message)}}):Object(P.jsx)(be.a,{startDelay:1,onTypingDone:function(){return e((n=t.index,{type:q,payload:{index:n}}));var n},cursor:{show:!0,blink:!0,element:"|",hideWhenDone:!0,hideWhenDoneDelay:250},children:Object(P.jsx)("span",{className:[le.a.message,a(t.message)&&le.a.priorityMessage].join(" "),children:n(t.message)})})},t.index)}))})})}var he=n(47),je=n.n(he),me=n(42),ye=n.n(me);var fe=function(e){var t=e.open,n=e.actions,a=e.children;return t?Object(P.jsx)("div",{className:ye.a.backdrop,children:Object(P.jsxs)("div",{className:ye.a.wrapper,children:[a,Object(P.jsx)(o.a,{container:!0,spacing:2,className:ye.a.actions,children:n&&n.length>0&&n.map((function(e,t){return Object(P.jsx)(o.a,{item:!0,children:Object(P.jsx)(u.a,{onClick:e.onClick,variant:"outlined",color:e.color,disabled:e.disabled,children:e.label})},"".concat(e.label,"_button"))}))})]})}):null};var Oe=function(){var e,t=Object(h.c)(),n=Object(h.d)((function(e){return e.sources.launchFacility})),r=Object(h.d)((function(e){return e.game.prestige})),i=function(){var e=Object(a.useState)(0),t=Object(c.a)(e,2),n=t[0],r=t[1],i=Object(h.d)((function(e){return e.sources.spaceElevator})),s=Object(h.d)((function(e){return e.sources.launchFacility})),o=function(e){return-1/(1+e/200)+1};return Object(a.useEffect)((function(){r(.35*o(s)+.65*o(i))}),[i,s]),n}(),s=Object(h.d)((function(e){return e.game.prestige})),d=Object(a.useState)(!1),b=Object(c.a)(d,2),p=b[0],j=b[1],m=[{label:"cancel",color:"secondary",onClick:function(){return j(!1)}},{label:"yes I'm ready",onClick:function(){t(s(r,i)),j(!1)}}];return 0===n?null:Object(P.jsxs)("div",{children:[Object(P.jsxs)(o.a,{item:!0,xs:12,style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(P.jsxs)("h2",{className:je.a.launchText,children:["RETURN TO ",0===s?"EARTH":"MARS"]}),Object(P.jsxs)("span",{className:je.a.subtext,children:["You will keep ",(e=100*i,e>1||e>.0999?e.toFixed(3):e>.0099?e.toFixed(4):e.toFixed(5)),"% of resources"]}),Object(P.jsx)(u.a,{fullWidth:!0,variant:"outlined",color:"secondary",onClick:function(){return j(!0)},children:"Launch"})]}),Object(P.jsx)(l.a,{style:{backgroundColor:"#dbdbdb",margin:"10px 0"}}),Object(P.jsx)(fe,{open:p,actions:m,children:Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{children:"Are you sure you are ready to launch?"}),Object(P.jsxs)("p",{children:["Building more ",Object(P.jsx)("span",{style:{color:"var(--color-primary)"},children:"Orbital Launch Platforms"})," and",Object(P.jsx)("span",{style:{color:"var(--color-primary)"},children:"Space Elevators"})," will increase the amount of resources you will get to bring with you. Only leave when you are sure you are ready."]})]})})]})};function ge(){var e=Object(h.c)(),t=Object(a.useState)("fabricate"),n=Object(c.a)(t,2),r=n[0],i=n[1];return Object(P.jsxs)(o.a,{container:!0,spacing:2,style:{height:"100vh"},alignItems:"stretch",children:[Object(P.jsxs)(o.a,{item:!0,xs:12,sm:4,md:3,className:p.a.sidePanel,style:{overflow:"hidden"},children:[Object(P.jsx)(C,{}),Object(P.jsx)(l.a,{style:{backgroundColor:"#dbdbdb",margin:"10px 0"}}),Object(P.jsx)(D,{}),Object(P.jsx)(l.a,{style:{backgroundColor:"#dbdbdb",margin:"10px 0"}}),Object(P.jsx)(u.a,{variant:"outlined",fullWidth:!0,onClick:function(){return e({type:U,payload:1})},children:"Mine resources"}),Object(P.jsx)(l.a,{style:{backgroundColor:"#dbdbdb",margin:"10px 0"}}),Object(P.jsx)(Oe,{}),Object(P.jsx)(pe,{})]}),Object(P.jsx)(o.a,{item:!0,xs:12,sm:4,md:6,children:Object(P.jsx)("div",{style:{height:"200px",width:"100%"}})}),Object(P.jsxs)(o.a,{item:!0,xs:12,sm:4,md:3,className:p.a.sidePanel,children:[Object(P.jsxs)(d.a,{fullWidth:!0,children:[Object(P.jsx)(u.a,{variant:"fabricate"===r?"contained":"outlined",onClick:function(){return i("fabricate")},children:"Fabricate"}),Object(P.jsx)(u.a,{variant:"research"===r?"contained":"outlined",onClick:function(){return i("research")},children:"Research"})]}),"fabricate"===r?Object(P.jsx)(se,{}):Object(P.jsx)(ce,{})]})]})}var ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(a.useRef)(e),r=Object(a.useRef)(performance.now()),i=Object(a.useRef)(performance.now());Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){var e=performance.now(),t=(e-i.current)/1e3,a=(e-r.current)/1e3;n.current({time:t,delta:a}),r.current=e}),t);return function(){return clearInterval(e)}}}),[t])};var xe=n(60),we=n.n(xe);var ke=function(e){e.open;var t=Object(h.c)(),n=Object(h.d)((function(e){return e.game.storyShow.meetColony})),r=Object(a.useState)(!1),i=Object(c.a)(r,2),s=(i[0],i[1]);return n?Object(P.jsx)(fe,{open:!0,actions:[{label:"Give Resources",onClick:function(){return t({type:J,payload:{type:"meetColony"}})}}],children:Object(P.jsxs)("div",{className:we.a.typistWrapper,children:[Object(P.jsxs)(be.a,{startDelay:1,onTypingDone:function(){return s(!0)},cursor:{show:!0,blink:!0,element:"|",hideWhenDone:!0,hideWhenDoneDelay:250},children:[Object(P.jsx)("span",{style:{fontSize:"1.5em"},children:"Incoming transmission..."}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(be.a.Delay,{ms:1e3}),Object(P.jsx)("span",{children:"Mayday Mayday SOS..."}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(be.a.Delay,{ms:1e3}),Object(P.jsx)("span",{children:"The earth has been destroyed!"}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(be.a.Delay,{ms:1e3}),Object(P.jsx)("span",{children:"We thought we were the only humans left in the universe"}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(be.a.Delay,{ms:1e3}),Object(P.jsx)("span",{children:"3 years ago the world fell into a civil war that ended up destroying Earth and most of Mars. We are only 8 people surviving deep under the martian surface. We hae no resources to rebuild and our space port was destroyed. Without help we won't survive longer than a couple more miserable years."}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(be.a.Delay,{ms:1e3}),Object(P.jsx)("span",{children:"Please..."}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),Object(P.jsx)(be.a.Delay,{ms:2e3}),Object(P.jsx)("span",{children:"Help us..."}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{})]}),Object(P.jsx)("br",{})]})}):null};function _e(){var e=Object(h.c)(),t=Object(h.d)(w),n=ue(I),r=Object(h.d)((function(e){return e.colony.population})),i=ue(_),s=ue((function(e){return e.colony.buildings})),o=Object(h.d)((function(e){return e.game.paused})),l=Object(a.useState)(0),u=Object(c.a)(l,2),d=u[0],b=u[1];return ve((function(a){a.time;var r=a.delta;if(!o){e({type:U,payload:t*r});var i=Object.entries(n).reduce((function(e,t){var n=Object(c.a)(t,2),a=n[0],i=n[1];return e[a]=i*r,e}),{});e({type:$,payload:{increases:i}})}}),40),ve((function(t){t.time;var n=t.delta;if(!o){var a,c,l,u;console.log("COLONY UPKEEP");var p=r*(n/60),h=!1;(null!==(a=i.food)&&void 0!==a?a:0)+(null!==(c=i.biomass)&&void 0!==c?c:0)>4*p&&(p*=2,h=!0);var j=Math.min(p,null!==(l=i.food)&&void 0!==l?l:0),m=p-j,y=m>(null!==(u=i.biomass)&&void 0!==u?u:0);e({type:Q,payload:{decreases:{biomass:m,food:j/2}}});var f=!1;if(y?(d>=3?(e(ne("A colonist has starved to death.",3)),e(re(-1))):e(ne(2===d?"We are starving, if we don't get food soon we will surely die.":1===d?"People are rationing and going without food, it's getting pretty bad down here.":"We are running dangerously low on food, if we dont get more soon we will need to start rationing...",3)),b((function(e){return e+1})),f=!0):h&&Math.random()>.92&&(e(ne("A new colonist has been born!",3)),e(ae(1))),(null===s||void 0===s?void 0:s.medic)&&!f&&Math.random()>.95){f=!0;var O=Math.ceil(4*Math.random()),g="";switch(O){case 1:g="A colonist has come down with a fever... ";break;case 2:g="Two colonists got into a fight and have injured one another... ";break;case 3:g="While working on the air recyclers a colonist got their arm stuck in the machine and emergency vented the room the others were working in... ";break;case 4:g="A disease has spread through some of the colonists... ";break;default:g="A got sick... "}(null===i||void 0===i?void 0:i.meds)>=O?g+="With proper medical treatment and some bed rest they ended up alright.":(g+="Unfortunately we did not have enough medicine to save them.",e(ae(-O))),e(ne(g,3))}}}),6e4),window.resetGame=function(){e({type:L})},window.addResources=function(t){e({type:U,payload:t})},console.log("game manager render sanity check"),Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(ke,{})})}var Ie=n(45),Te=n(8),Ee=n(61),Se=n.n(Ee);var Pe=function(){var e=Object(h.d)((function(e){return e.colony.population})),t=ue((function(e){return e.resources.colonyResources})),n=ue(T);return Object(P.jsxs)("div",{style:{paddingTop:"20px"},children:[Object(P.jsx)("h1",{style:{margin:0,float:"left"},children:"Mars Colony"}),Object(P.jsxs)("h3",{style:{marginTop:0,marginBottom:0,opacity:.5,textAlign:"right"},children:[t," - Orbital Resources"]}),Object(P.jsxs)("h3",{style:{marginTop:0,marginBottom:0,opacity:.5,textAlign:"right"},children:[e," (",e-Object.values(n).reduce((function(e,t){return e+t}),0),") - Population"]})]})};var Ce=function(){var e=ue(_);return Object(P.jsx)("div",{children:Object(P.jsxs)("table",{style:{width:"100%",textAlign:"left"},children:[Object(P.jsx)("thead",{children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Resource"}),Object(P.jsx)("th",{children:"amount"})]})}),Object(P.jsx)("tbody",{children:Object.entries(e).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:n}),Object(P.jsx)("td",{children:a})]},"colony_resources_".concat(n))}))})]})})};var Ne=function(){var e=Object(h.c)(),t=ue((function(e){return e.colony.buildings})),n=Object(h.d)((function(e){return e.resources.colonyResources})),a=Object.entries(O).map((function(e){var t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(j.a)(Object(j.a)({},a),{},{key:n})}));return Object(P.jsx)(o.a,{container:!0,spacing:1,style:{marginTop:"10px"},children:a.map((function(r,i){var s,c;return 0===i||t[a[i-1].key]>0?Object(P.jsx)(o.a,{item:!0,xs:12,children:Object(P.jsx)(F,{title:r.title,subtitle:r.subtitle,altText:"".concat(r.workers," workers /building"),owned:t[r.key],price:ie(r,null!==(s=t[r.key])&&void 0!==s?s:0),disabled:n<ie(r,null!==(c=t[r.key])&&void 0!==c?c:0),onPurchase:function(){var n,a,i,s;e((a=r.key,i=t[r.key],s=ie(r,null!==(n=t[r.key])&&void 0!==n?n:0),{type:K,payload:{type:a,count:i,price:s}}))}})},"buildings_option_".concat(r.key)):null}))})},Me=n(29),De=n.n(Me),Re=n(113),We=n(63),Ae=n.n(We),Fe=n(62),Le=n.n(Fe);var Ue=function(e){var t=e.name,n=e.assigned,a=e.subtitle,r=Object(h.c)();return Object(P.jsx)("div",{className:De.a.controlWrapper,children:Object(P.jsxs)(o.a,{container:!0,children:[Object(P.jsxs)(o.a,{item:!0,xs:8,className:De.a.titles,children:[Object(P.jsx)("h2",{children:t}),Object(P.jsx)("p",{children:a})]}),Object(P.jsxs)(o.a,{item:!0,xs:4,className:De.a.controls,children:[Object(P.jsx)("div",{className:De.a.assignedCount,children:Object(P.jsx)("h1",{children:null!==n&&void 0!==n?n:0})}),Object(P.jsx)("div",{className:De.a.up,children:Object(P.jsx)(Re.a,{size:"small",onClick:function(){return r(re(t))},children:Object(P.jsx)(Le.a,{})})}),Object(P.jsx)("div",{className:De.a.down,children:Object(P.jsx)(Re.a,{size:"small",onClick:function(){return r({type:te,payload:{type:t}})},children:Object(P.jsx)(Ae.a,{})})})]})]})})};var Be=function(){var e=ue((function(e){return e.colony.assignments})),t=(ue(I),function(e,t){var n,a=[],r=Object(m.a)(e.inputs);try{for(r.s();!(n=r.n()).done;){var i=n.value;a.push("-".concat(i.numerator*t," ").concat(i.name," /").concat(i.denominator,"s"))}}catch(l){r.e(l)}finally{r.f()}var s,c=Object(m.a)(e.outputs);try{for(c.s();!(s=c.n()).done;){var o=s.value;a.push("+".concat(o.numerator*t," ").concat(o.name," /").concat(o.denominator,"s"))}}catch(l){c.e(l)}finally{c.f()}return a.join(", ")});return Object(P.jsx)("div",{children:Object.entries(e).map((function(e){var n=Object(c.a)(e,2),a=n[0],r=n[1],i=O[a];return i?Object(P.jsx)(Ue,{name:a,assigned:r,subtitle:t(i,r)},"assignments_".concat(a)):null}))})};var Ge=function(){return Object(P.jsxs)(o.a,{container:!0,spacing:2,className:Se.a.wrapper,children:[Object(P.jsx)(o.a,{item:!0,md:4,children:Object(P.jsx)(pe,{})}),Object(P.jsxs)(o.a,{item:!0,md:4,children:[Object(P.jsx)(Pe,{}),Object(P.jsx)(l.a,{style:{backgroundColor:"#dbdbdb",margin:"10px 0"}}),Object(P.jsx)(Ce,{}),Object(P.jsx)(l.a,{style:{backgroundColor:"#dbdbdb",margin:"10px 0"}}),Object(P.jsx)(Be,{})]}),Object(P.jsxs)(o.a,{item:!0,md:4,children:[Object(P.jsx)("h1",{style:{margin:0},children:"Buildings"}),Object(P.jsx)(l.a,{style:{backgroundColor:"#dbdbdb",margin:"10px 0"}}),Object(P.jsx)(Ne,{})]})]})},Ye=n(64),ze=n.n(Ye);var qe=function(e){var t=Object(Te.g)(),n=Object(Te.f)();return Object(P.jsx)("div",{className:ze.a.wrapper,children:Object(P.jsxs)(d.a,{fullWidth:!0,children:[Object(P.jsx)(u.a,{variant:"/"===t.pathname?"contained":"outlined",onClick:function(){return n.push("/")},children:"System"}),Object(P.jsx)(u.a,{variant:"/colony"===t.pathname?"contained":"outlined",onClick:function(){return n.push("/colony")},children:"Colony"})]})})};var He=function(){var e=Object(h.d)((function(e){return e.game.prestige}));return Object(h.d)((function(e){return e.game.paused})),Object(P.jsx)("div",{style:{padding:"8px"},children:Object(P.jsxs)(Ie.a,{children:[Object(P.jsx)(_e,{}),e>0&&Object(P.jsx)(qe,{}),Object(P.jsxs)(Te.c,{children:[e>0&&Object(P.jsx)(Te.a,{path:"/colony",children:Object(P.jsx)(Ge,{})}),Object(P.jsx)(Te.a,{children:Object(P.jsx)(ge,{})})]})]})})},Xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,115)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))},Ve=n(22),Je={current:0,colonyResources:0};var Ke=n(16),Ze=Object.keys(y).reduce((function(e,t){return e[t]=0,e}),{});var $e=n(17),Qe=[];var et=[{message:"Wakey wakey, logs indicate you've been asleep for 93 years. We have arrived at the destination,  asteroid designation 'AX62'. <br/><br/> <strong>Trip Debrief:</strong> We are aproximatly 57,000AU from earth making light speed communication delay 329 days or just over 2 years round trip. During transit we encounted 33 micrometeorite collisions resulting in damage to our long range communication equipment. All other systems are above 95% active health. <br/><br/>I am <strong>IAN</strong> and will be your insanity avoidance AI for the remainder of your time in the Oort Cloud.",received:!0,delay:1,index:0}];var tt={paused:!1,prestige:0,storyShow:{meetColony:!1}};var nt={population:5,buildings:{},assignments:{},resources:{}};var at=n(41),rt=n.n(at),it=Object(Ve.b)({resources:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(j.a)(Object(j.a)({},e),{},{current:e.current+=t.payload});case B:return Object(j.a)(Object(j.a)({},e),{},{current:Math.max(e.current-=t.payload,0)});case G:case Y:return Object(j.a)(Object(j.a)({},e),{},{current:Math.max(e.current-=t.payload.price,0)});case K:return Object(j.a)(Object(j.a)({},e),{},{colonyResources:e.colonyResources-t.payload.price});case V:var n=t.payload.keepPercent,a=Math.ceil(e.current*n);return Object(j.a)(Object(j.a)({},e),{},{current:0,colonyResources:e.colonyResources+a});default:return e}},sources:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return Object(j.a)(Object(j.a)({},e),{},Object(Ke.a)({},t.payload.type,e[t.payload.type]+=1));case V:return Ze;default:return e}},upgrades:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object($e.a)(new Set([].concat(Object($e.a)(e),[t.payload.id])));case V:return Qe;default:return e}},communications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return[].concat(Object($e.a)(e),[Object(j.a)(Object(j.a)({},t.payload),{},{received:!1,index:e.length})]);case q:var n=Object($e.a)(e),a=n.find((function(e){return e.index===t.payload.index}));return a&&(a.received=!0),n;case H:case V:return[];case G:var r=t.payload,i=r.type,s=r.count,c=r.prestige;return c>0?e:0===s&&y[i].message?[].concat(Object($e.a)(e),[{message:y[i].message,delay:3,received:!1,index:e.length}]):e;case Y:var o=t.payload,l=o.id,u=o.prestige;if(u>0)return e;var d=f.find((function(e){return e.id===l}));return(null===d||void 0===d?void 0:d.message)?[].concat(Object($e.a)(e),[{message:d.message,delay:3,received:!1,index:e.length}]):e;default:return e}},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(j.a)(Object(j.a)({},e),{},{paused:!e.paused});case V:var n=Object(j.a)(Object(j.a)({},e),{},{prestige:e.prestige+1});return 1===n.prestige&&(n.storyShow.meetColony=!0,n.paused=!0),n;case J:return Object(j.a)(Object(j.a)({},e),{},{paused:!1,storyShow:Object(j.a)(Object(j.a)({},e.storyShow),{},Object(Ke.a)({},t.payload.type,!1))});default:return e}},colony:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z:return Object(j.a)(Object(j.a)({},e),{},{population:Math.max(e.population+t.payload.count,1)});case $:for(var n=Object(j.a)({},e.resources),a=0,r=Object.entries(t.payload.increases);a<r.length;a++){var i,s=Object(c.a)(r[a],2),o=s[0],l=s[1];n[o]=(null!==(i=e.resources[o])&&void 0!==i?i:0)+l}return Object(j.a)(Object(j.a)({},e),{},{resources:n});case Q:for(var u=Object(j.a)({},e.resources),d=0,b=Object.entries(t.payload.decreases);d<b.length;d++){var p,h=Object(c.a)(b[d],2),y=h[0],f=h[1];u[y]&&(u[y]=Math.max((null!==(p=u[y])&&void 0!==p?p:0)-f,0))}return Object(j.a)(Object(j.a)({},e),{},{resources:u});case K:var g,v,x,w=t.payload.type,k=O[w],_={},I=Object(m.a)(k.outputs);try{for(I.s();!(x=I.n()).done;){var T,E=x.value;_[E.name]=null!==(T=e.resources[E.name])&&void 0!==T?T:0}}catch(J){I.e(J)}finally{I.f()}var S,P=Object(m.a)(k.inputs);try{for(P.s();!(S=P.n()).done;){var C,N=S.value;_[N.name]=null!==(C=e.resources[N.name])&&void 0!==C?C:0}}catch(J){P.e(J)}finally{P.f()}return Object(j.a)(Object(j.a)({},e),{},{buildings:Object(j.a)(Object(j.a)({},e.buildings),{},Object(Ke.a)({},w,(null!==(g=e.buildings[w])&&void 0!==g?g:0)+1)),resources:Object(j.a)(Object(j.a)({},e.resources),_),assignments:Object(j.a)(Object(j.a)({},e.assignments),{},Object(Ke.a)({},w,null!==(v=e.assignments[w])&&void 0!==v?v:0))});case ee:var M,D=t.payload.type,R=Object(j.a)({},e.assignments),W=O[t.payload.type],A=W.workers*e.buildings[t.payload.type];if(e.assignments[t.payload.type]>=A)return e;for(var F=Object.values(e.assignments).reduce((function(e,t){return e+t}),0),L=F+1-e.population,U=0;U<L;U++)for(var B=0,G=Object.entries(R);B<G.length;B++){var Y=Object(c.a)(G[B],2),z=Y[0],q=Y[1];if(q>0&&z!==D){R[z]-=1,L-=1;break}}return R[D]=Math.min((null!==(M=R[D])&&void 0!==M?M:0)+1,A,e.population),Object(j.a)(Object(j.a)({},e),{},{assignments:R});case te:var H,X=t.payload.type,V=Object(j.a)({},e.assignments);return V[X]=Math.max((null!==(H=V[X])&&void 0!==H?H:0)-1,0),Object(j.a)(Object(j.a)({},e),{},{assignments:V});default:return e}}}),st=n(50),ct=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ve.c,ot={key:"root",storage:rt.a},lt=Object(st.a)(ot,(function(e,t){return t.type===L?(rt.a.removeItem("persist:root"),it(void 0,t)):it(e,t)})),ut=Object(Ve.d)(lt,ct(Object(Ve.a)())),dt=Object(st.b)(ut),bt=n(114),pt=n(66),ht=Object(pt.a)({palette:{type:"dark"}}),jt=n(65);s.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(h.a,{store:ut,children:Object(P.jsx)(jt.a,{loading:null,persistor:dt,children:Object(P.jsx)(bt.a,{theme:ht,children:Object(P.jsx)(He,{})})})})}),document.getElementById("root")),Xe()}},[[91,1,2]]]);
//# sourceMappingURL=main.0fda8917.chunk.js.map